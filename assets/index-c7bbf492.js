import{r as k,v as $,y as R,s as b,c as l,L as H,I as ee,d as z,T as K,B as M,C as F,a as te,z as ne,A as oe,M as ae,F as se,m as le}from"./index-a0915313.js";import{P as ce,Q as re,o as ie,K as ue,C as de,n as P,t as m,u as j,p as fe,R as ve,E as G,c as L,q as U,e as V,g as Y,h as p,w as E,m as B,S as he,I as W}from"./index-14aec135.js";import{o as me,a as ye,u as Ie,P as ge}from"./use-touch-a4d081dc.js";import{H as A,c as xe}from"./use-route-c3a680bb.js";function ke(e,{args:n=[],done:t,canceled:o}){if(e){const a=e.apply(null,n);ce(a)?a.then(r=>{r?t():o&&o()}).catch(re):a?t():o&&o()}else t()}const we=(e,n)=>{const t=k(),o=()=>{t.value=de(e).height};return $(()=>{if(R(o),n)for(let a=1;a<=3;a++)setTimeout(o,100*a)}),me(()=>R(o)),b([ie,ue],o),t};function Ce(e,n){const t=we(e,!0);return o=>l("div",{class:n("placeholder"),style:{height:t.value?`${t.value}px`:void 0}},[o()])}const Oe={show:Boolean,zIndex:P,overlay:m,duration:P,teleport:[String,Object],lockScroll:m,lazyRender:m,beforeClose:Function,overlayStyle:Object,overlayClass:j,transitionAppear:Boolean,closeOnClickOverlay:m};let O=0;const D="van-overflow-hidden";function Pe(e,n){const t=ye(),o="01",a="10",r=c=>{t.move(c);const f=t.deltaY.value>0?a:o,C=ve(c.target,e.value),{scrollHeight:I,offsetHeight:g,scrollTop:x}=C;let v="11";x===0?v=g>=I?"00":"01":x+g>=I&&(v="10"),v!=="11"&&t.isVertical()&&!(parseInt(v,2)&parseInt(f,2))&&G(c,!0)},i=()=>{document.addEventListener("touchstart",t.start),document.addEventListener("touchmove",r,{passive:!1}),O||document.body.classList.add(D),O++},u=()=>{O&&(document.removeEventListener("touchstart",t.start),document.removeEventListener("touchmove",r),O--,O||document.body.classList.remove(D))},w=()=>n()&&i(),y=()=>n()&&u();fe(w),H(y),ee(y),b(n,c=>{c?i():u()})}function Z(e){const n=k(!1);return b(e,t=>{t&&(n.value=t)},{immediate:!0}),t=>()=>n.value?t():null}const[Te,be]=L("overlay"),Se={show:Boolean,zIndex:P,duration:P,className:j,lockScroll:m,lazyRender:m,customStyle:Object};var Be=z({name:Te,props:Se,setup(e,{slots:n}){const t=k(),o=Z(()=>e.show||!e.lazyRender),a=i=>{e.lockScroll&&G(i,!0)},r=o(()=>{var i;const u=V(Y(e.zIndex),e.customStyle);return p(e.duration)&&(u.animationDuration=`${e.duration}s`),M(l("div",{ref:t,style:u,class:[be(),e.className]},[(i=n.default)==null?void 0:i.call(n)]),[[F,e.show]])});return U("touchmove",a,{target:t}),()=>l(K,{name:"van-fade",appear:!0},{default:r})}});const Re=E(Be),Ae=V({},Oe,{round:Boolean,position:B("center"),closeIcon:B("cross"),closeable:Boolean,transition:String,iconPrefix:String,closeOnPopstate:Boolean,closeIconPosition:B("top-right"),safeAreaInsetTop:Boolean,safeAreaInsetBottom:Boolean}),[ze,N]=L("popup");var Le=z({name:ze,inheritAttrs:!1,props:Ae,emits:["open","close","opened","closed","keydown","update:show","clickOverlay","clickCloseIcon"],setup(e,{emit:n,attrs:t,slots:o}){let a,r;const i=k(),u=k(),w=Z(()=>e.show||!e.lazyRender),y=te(()=>{const s={zIndex:i.value};if(p(e.duration)){const h=e.position==="center"?"animationDuration":"transitionDuration";s[h]=`${e.duration}s`}return s}),c=()=>{a||(a=!0,i.value=e.zIndex!==void 0?+e.zIndex:he(),n("open"))},f=()=>{a&&ke(e.beforeClose,{done(){a=!1,n("close"),n("update:show",!1)}})},C=s=>{n("clickOverlay",s),e.closeOnClickOverlay&&f()},I=()=>{if(e.overlay)return l(Re,{show:e.show,class:e.overlayClass,zIndex:i.value,duration:e.duration,customStyle:e.overlayStyle,role:e.closeOnClickOverlay?"button":void 0,tabindex:e.closeOnClickOverlay?0:void 0,onClick:C},{default:o["overlay-content"]})},g=s=>{n("clickCloseIcon",s),f()},x=()=>{if(e.closeable)return l(W,{role:"button",tabindex:0,name:e.closeIcon,class:[N("close-icon",e.closeIconPosition),A],classPrefix:e.iconPrefix,onClick:g},null)},v=()=>n("opened"),q=()=>n("closed"),Q=s=>n("keydown",s),J=w(()=>{var s;const{round:h,position:T,safeAreaInsetTop:S,safeAreaInsetBottom:X}=e;return M(l("div",le({ref:u,style:y.value,role:"dialog",tabindex:0,class:[N({round:h,[T]:T}),{"van-safe-area-top":S,"van-safe-area-bottom":X}],onKeydown:Q},t),[(s=o.default)==null?void 0:s.call(o),x()]),[[F,e.show]])}),_=()=>{const{position:s,transition:h,transitionAppear:T}=e,S=s==="center"?"van-fade":`van-popup-slide-${s}`;return l(K,{name:h||S,appear:T,onAfterEnter:v,onAfterLeave:q},{default:J})};return b(()=>e.show,s=>{s&&!a&&(c(),t.tabindex===0&&R(()=>{var h;(h=u.value)==null||h.focus()})),!s&&a&&(a=!1,n("close"))}),Ie({popupRef:u}),Pe(u,()=>e.show&&e.lockScroll),U("popstate",()=>{e.closeOnPopstate&&(f(),r=!1)}),$(()=>{e.show&&c()}),ne(()=>{r&&(n("update:show",!0),r=!1)}),H(()=>{e.show&&e.teleport&&(f(),r=!0)}),oe(ge,()=>e.show),()=>e.teleport?l(ae,{to:e.teleport},{default:()=>[I(),_()]}):l(se,null,[I(),_()])}});const Me=E(Le),[Ee,d]=L("nav-bar"),_e={title:String,fixed:Boolean,zIndex:P,border:m,leftText:String,rightText:String,leftArrow:Boolean,placeholder:Boolean,safeAreaInsetTop:Boolean,clickable:m};var De=z({name:Ee,props:_e,emits:["clickLeft","clickRight"],setup(e,{emit:n,slots:t}){const o=k(),a=Ce(o,d),r=c=>n("clickLeft",c),i=c=>n("clickRight",c),u=()=>t.left?t.left():[e.leftArrow&&l(W,{class:d("arrow"),name:"arrow-left"},null),e.leftText&&l("span",{class:d("text")},[e.leftText])],w=()=>t.right?t.right():l("span",{class:d("text")},[e.rightText]),y=()=>{const{title:c,fixed:f,border:C,zIndex:I}=e,g=Y(I),x=e.leftArrow||e.leftText||t.left,v=e.rightText||t.right;return l("div",{ref:o,style:g,class:[d({fixed:f}),{[xe]:C,"van-safe-area-top":e.safeAreaInsetTop}]},[l("div",{class:d("content")},[x&&l("div",{class:[d("left"),e.clickable?A:""],onClick:r},[u()]),l("div",{class:[d("title"),"van-ellipsis"]},[t.title?t.title():c]),v&&l("div",{class:[d("right"),e.clickable?A:""],onClick:i},[w()])])])};return()=>e.fixed&&e.placeholder?a(y):y()}});const Fe=E(De);export{Fe as N,Me as P,ke as c,Oe as p,Ce as u};
