import{r as k,v as N,y as R,s as T,c as l,M as H,I as te,d as z,T as K,B as p,C as M,a as ne,z as oe,A as ae,N as se,F as le,m as ce}from"./index-e0a5d4f9.js";import{P as re,E as ie,o as ue,K as de,C as fe,n as C,t as y,u as j,p as ve,R as he,G as F,c as L,q as G,e as U,g as V,h as Y,w as E,m as B,S as ye,I as W}from"./index-0a3a7c41.js";import{o as me,a as xe,u as Ie,P as ge}from"./use-touch-7abbf770.js";import{H as A,e as ke}from"./use-route-7ba8dcd2.js";function we(e,{args:n=[],done:t,canceled:o}){if(e){const a=e.apply(null,n);re(a)?a.then(r=>{r?t():o&&o()}).catch(ie):a?t():o&&o()}else t()}const Oe=(e,n)=>{const t=k(),o=()=>{t.value=fe(e).height};return N(()=>{if(R(o),n)for(let a=1;a<=3;a++)setTimeout(o,100*a)}),me(()=>R(o)),T([ue,de],o),t};function Pe(e,n){const t=Oe(e,!0);return o=>l("div",{class:n("placeholder"),style:{height:t.value?`${t.value}px`:void 0}},[o()])}const Z={show:Boolean,zIndex:C,overlay:y,duration:C,teleport:[String,Object],lockScroll:y,lazyRender:y,beforeClose:Function,overlayStyle:Object,overlayClass:j,transitionAppear:Boolean,closeOnClickOverlay:y},pe=Object.keys(Z);let P=0;const D="van-overflow-hidden";function Ce(e,n){const t=xe(),o="01",a="10",r=c=>{t.move(c);const f=t.deltaY.value>0?a:o,O=he(c.target,e.value),{scrollHeight:x,offsetHeight:I,scrollTop:g}=O;let v="11";g===0?v=I>=x?"00":"01":g+I>=x&&(v="10"),v!=="11"&&t.isVertical()&&!(parseInt(v,2)&parseInt(f,2))&&F(c,!0)},i=()=>{document.addEventListener("touchstart",t.start),document.addEventListener("touchmove",r,{passive:!1}),P||document.body.classList.add(D),P++},u=()=>{P&&(document.removeEventListener("touchstart",t.start),document.removeEventListener("touchmove",r),P--,P||document.body.classList.remove(D))},w=()=>n()&&i(),m=()=>n()&&u();ve(w),H(m),te(m),T(n,c=>{c?i():u()})}function q(e){const n=k(!1);return T(e,t=>{t&&(n.value=t)},{immediate:!0}),t=>()=>n.value?t():null}const[be,Te]=L("overlay"),Se={show:Boolean,zIndex:C,duration:C,className:j,lockScroll:y,lazyRender:y,customStyle:Object};var Be=z({name:be,props:Se,setup(e,{slots:n}){const t=k(),o=q(()=>e.show||!e.lazyRender),a=i=>{e.lockScroll&&F(i,!0)},r=o(()=>{var i;const u=U(V(e.zIndex),e.customStyle);return Y(e.duration)&&(u.animationDuration=`${e.duration}s`),p(l("div",{ref:t,style:u,class:[Te(),e.className]},[(i=n.default)==null?void 0:i.call(n)]),[[M,e.show]])});return G("touchmove",a,{target:t}),()=>l(K,{name:"van-fade",appear:!0},{default:r})}});const Re=E(Be),Ae=U({},Z,{round:Boolean,position:B("center"),closeIcon:B("cross"),closeable:Boolean,transition:String,iconPrefix:String,closeOnPopstate:Boolean,closeIconPosition:B("top-right"),safeAreaInsetTop:Boolean,safeAreaInsetBottom:Boolean}),[ze,$]=L("popup");var Le=z({name:ze,inheritAttrs:!1,props:Ae,emits:["open","close","opened","closed","keydown","update:show","clickOverlay","clickCloseIcon"],setup(e,{emit:n,attrs:t,slots:o}){let a,r;const i=k(),u=k(),w=q(()=>e.show||!e.lazyRender),m=ne(()=>{const s={zIndex:i.value};if(Y(e.duration)){const h=e.position==="center"?"animationDuration":"transitionDuration";s[h]=`${e.duration}s`}return s}),c=()=>{a||(a=!0,i.value=e.zIndex!==void 0?+e.zIndex:ye(),n("open"))},f=()=>{a&&we(e.beforeClose,{done(){a=!1,n("close"),n("update:show",!1)}})},O=s=>{n("clickOverlay",s),e.closeOnClickOverlay&&f()},x=()=>{if(e.overlay)return l(Re,{show:e.show,class:e.overlayClass,zIndex:i.value,duration:e.duration,customStyle:e.overlayStyle,role:e.closeOnClickOverlay?"button":void 0,tabindex:e.closeOnClickOverlay?0:void 0,onClick:O},{default:o["overlay-content"]})},I=s=>{n("clickCloseIcon",s),f()},g=()=>{if(e.closeable)return l(W,{role:"button",tabindex:0,name:e.closeIcon,class:[$("close-icon",e.closeIconPosition),A],classPrefix:e.iconPrefix,onClick:I},null)},v=()=>n("opened"),J=()=>n("closed"),Q=s=>n("keydown",s),X=w(()=>{var s;const{round:h,position:b,safeAreaInsetTop:S,safeAreaInsetBottom:ee}=e;return p(l("div",ce({ref:u,style:m.value,role:"dialog",tabindex:0,class:[$({round:h,[b]:b}),{"van-safe-area-top":S,"van-safe-area-bottom":ee}],onKeydown:Q},t),[(s=o.default)==null?void 0:s.call(o),g()]),[[M,e.show]])}),_=()=>{const{position:s,transition:h,transitionAppear:b}=e,S=s==="center"?"van-fade":`van-popup-slide-${s}`;return l(K,{name:h||S,appear:b,onAfterEnter:v,onAfterLeave:J},{default:X})};return T(()=>e.show,s=>{s&&!a&&(c(),t.tabindex===0&&R(()=>{var h;(h=u.value)==null||h.focus()})),!s&&a&&(a=!1,n("close"))}),Ie({popupRef:u}),Ce(u,()=>e.show&&e.lockScroll),G("popstate",()=>{e.closeOnPopstate&&(f(),r=!1)}),N(()=>{e.show&&c()}),oe(()=>{r&&(n("update:show",!0),r=!1)}),H(()=>{e.show&&e.teleport&&(f(),r=!0)}),ae(ge,()=>e.show),()=>e.teleport?l(se,{to:e.teleport},{default:()=>[x(),_()]}):l(le,null,[x(),_()])}});const Me=E(Le),[Ee,d]=L("nav-bar"),_e={title:String,fixed:Boolean,zIndex:C,border:y,leftText:String,rightText:String,leftArrow:Boolean,placeholder:Boolean,safeAreaInsetTop:Boolean,clickable:y};var De=z({name:Ee,props:_e,emits:["clickLeft","clickRight"],setup(e,{emit:n,slots:t}){const o=k(),a=Pe(o,d),r=c=>n("clickLeft",c),i=c=>n("clickRight",c),u=()=>t.left?t.left():[e.leftArrow&&l(W,{class:d("arrow"),name:"arrow-left"},null),e.leftText&&l("span",{class:d("text")},[e.leftText])],w=()=>t.right?t.right():l("span",{class:d("text")},[e.rightText]),m=()=>{const{title:c,fixed:f,border:O,zIndex:x}=e,I=V(x),g=e.leftArrow||e.leftText||t.left,v=e.rightText||t.right;return l("div",{ref:o,style:I,class:[d({fixed:f}),{[ke]:O,"van-safe-area-top":e.safeAreaInsetTop}]},[l("div",{class:d("content")},[g&&l("div",{class:[d("left"),e.clickable?A:""],onClick:r},[u()]),l("div",{class:[d("title"),"van-ellipsis"]},[t.title?t.title():c]),v&&l("div",{class:[d("right"),e.clickable?A:""],onClick:i},[w()])])])};return()=>e.fixed&&e.placeholder?a(m):m()}});const je=E(De);export{je as N,Me as P,pe as a,we as c,Z as p,Pe as u};
