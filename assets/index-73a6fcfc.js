import{r as K,u as Q,d as W,F as Y,B as X}from"./use-route-7ba8dcd2.js";import{c as $,e as x,m as b,n as T,I as U,G as D,w as z,b as Z,t as E,A as ee,Q as te,u as L,h as ne,L as oe,i as ae}from"./index-0a3a7c41.js";import{L as j,i as _}from"./request-1e91a24a.js";import{d as I,c as r,s as M,v as se,J as ie,m as A,L as le,x as re,r as ce,g as ue,F as de,D as fe}from"./index-e0a5d4f9.js";import{u as q}from"./use-touch-7abbf770.js";import{P as me}from"./index-c0a36645.js";const[ge,w]=$("button"),ve=x({},K,{tag:b("button"),text:String,icon:String,type:b("default"),size:b("normal"),color:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,hairline:Boolean,disabled:Boolean,iconPrefix:String,nativeType:b("button"),loadingSize:T,loadingText:String,loadingType:String,iconPosition:b("left")});var he=I({name:ge,props:ve,emits:["click"],setup(e,{emit:o,slots:n}){const i=Q(),c=()=>n.loading?n.loading():r(j,{size:e.loadingSize,type:e.loadingType,class:w("loading")},null),u=()=>{if(e.loading)return c();if(n.icon)return r("div",{class:w("icon")},[n.icon()]);if(e.icon)return r(U,{name:e.icon,class:w("icon"),classPrefix:e.iconPrefix},null)},v=()=>{let s;if(e.loading?s=e.loadingText:s=n.default?n.default():e.text,s)return r("span",{class:w("text")},[s])},p=()=>{const{color:s,plain:y}=e;if(s){const l={color:y?s:"white"};return y||(l.background=s),s.includes("gradient")?l.border=0:l.borderColor=s,l}},h=s=>{e.loading?D(s):e.disabled||(o("click",s),i())};return()=>{const{tag:s,type:y,size:l,block:f,round:S,plain:k,square:B,loading:t,disabled:a,hairline:d,nativeType:g,iconPosition:m}=e,F=[w([y,l,{plain:k,block:f,round:S,square:B,loading:t,disabled:a,hairline:d}]),{[W]:d}];return r(s,{type:g,class:F,style:p(),disabled:a,onClick:h},{default:()=>[r("div",{class:w("content")},[m==="left"&&u(),v(),m==="right"&&u()])]})}}});const qe=z(he),[ye,be]=$("form"),pe={colon:Boolean,disabled:Boolean,readonly:Boolean,showError:Boolean,labelWidth:T,labelAlign:String,inputAlign:String,scrollToError:Boolean,validateFirst:Boolean,submitOnEnter:E,showErrorMessage:E,errorMessageAlign:String,validateTrigger:{type:[String,Array],default:"onBlur"}};var Se=I({name:ye,props:pe,emits:["submit","failed"],setup(e,{emit:o,slots:n}){const{children:i,linkChildren:c}=Z(Y),u=t=>t?i.filter(a=>t.includes(a.name)):i,v=t=>new Promise((a,d)=>{const g=[];u(t).reduce((F,J)=>F.then(()=>{if(!g.length)return J.validate().then(V=>{V&&g.push(V)})}),Promise.resolve()).then(()=>{g.length?d(g):a()})}),p=t=>new Promise((a,d)=>{const g=u(t);Promise.all(g.map(m=>m.validate())).then(m=>{m=m.filter(Boolean),m.length?d(m):a()})}),h=t=>{const a=i.find(d=>d.name===t);return a?new Promise((d,g)=>{a.validate().then(m=>{m?g(m):d()})}):Promise.reject()},s=t=>typeof t=="string"?h(t):e.validateFirst?v(t):p(t),y=t=>{typeof t=="string"&&(t=[t]),u(t).forEach(d=>{d.resetValidation()})},l=()=>i.reduce((t,a)=>(t[a.name]=a.getValidationStatus(),t),{}),f=(t,a)=>{i.some(d=>d.name===t?(d.$el.scrollIntoView(a),!0):!1)},S=()=>i.reduce((t,a)=>(a.name!==void 0&&(t[a.name]=a.formValue.value),t),{}),k=()=>{const t=S();s().then(()=>o("submit",t)).catch(a=>{o("failed",{values:t,errors:a}),e.scrollToError&&a[0].name&&f(a[0].name)})},B=t=>{D(t),k()};return c({props:e}),q({submit:k,validate:s,getValues:S,scrollToField:f,resetValidation:y,getValidationStatus:l}),()=>{var t;return r("form",{class:be(),onSubmit:B},[(t=n.default)==null?void 0:t.call(n)])}}});const Ge=z(Se);let P=0;function ke(e){e?(P||document.body.classList.add("van-toast--unclickable"),P++):P&&(P--,P||document.body.classList.remove("van-toast--unclickable"))}const[we,C]=$("toast"),Ce=["show","overlay","teleport","transition","overlayClass","overlayStyle","closeOnClickOverlay"],Be={icon:String,show:Boolean,type:b("text"),overlay:Boolean,message:T,iconSize:T,duration:te(2e3),position:b("middle"),teleport:[String,Object],wordBreak:String,className:L,iconPrefix:String,transition:b("van-fade"),loadingType:String,forbidClick:Boolean,overlayClass:L,overlayStyle:Object,closeOnClick:Boolean,closeOnClickOverlay:Boolean};var Pe=I({name:we,props:Be,emits:["update:show"],setup(e,{emit:o,slots:n}){let i,c=!1;const u=()=>{const l=e.show&&e.forbidClick;c!==l&&(c=l,ke(c))},v=l=>o("update:show",l),p=()=>{e.closeOnClick&&v(!1)},h=()=>clearTimeout(i),s=()=>{const{icon:l,type:f,iconSize:S,iconPrefix:k,loadingType:B}=e;if(l||f==="success"||f==="fail")return r(U,{name:l||f,size:S,class:C("icon"),classPrefix:k},null);if(f==="loading")return r(j,{class:C("loading"),size:S,type:B},null)},y=()=>{const{type:l,message:f}=e;if(n.message)return r("div",{class:C("text")},[n.message()]);if(ne(f)&&f!=="")return l==="html"?r("div",{key:0,class:C("text"),innerHTML:String(f)},null):r("div",{class:C("text")},[f])};return M(()=>[e.show,e.forbidClick],u),M(()=>[e.show,e.type,e.message,e.duration],()=>{h(),e.show&&e.duration>0&&(i=setTimeout(()=>{v(!1)},e.duration))}),se(u),ie(u),()=>r(me,A({class:[C([e.position,e.wordBreak==="normal"?"break-normal":e.wordBreak,{[e.type]:!e.icon}]),e.className],lockScroll:!1,onClick:p,onClosed:h,"onUpdate:show":v},ee(e,Ce)),{default:()=>[s(),y()]})}});function xe(){const e=re({show:!1}),o=c=>{e.show=c},n=c=>{x(e,c,{transitionAppear:!0}),o(!0)},i=()=>o(!1);return q({open:n,close:i,toggle:o}),{open:n,close:i,state:e,toggle:o}}function Oe(e){const o=le(e),n=document.createElement("div");return document.body.appendChild(n),{instance:o.mount(n),unmount(){o.unmount(),document.body.removeChild(n)}}}const Te={icon:"",type:"text",message:"",className:"",overlay:!1,onClose:void 0,onOpened:void 0,duration:2e3,teleport:"body",iconSize:void 0,iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,overlayClass:"",overlayStyle:void 0,closeOnClick:!1,closeOnClickOverlay:!1};let O=[],$e=!1,N=x({},Te);const Ie=new Map;function G(e){return ae(e)?e:{message:e}}function Fe(){const{instance:e,unmount:o}=Oe({setup(){const n=ce(""),{open:i,state:c,close:u,toggle:v}=xe(),p=()=>{},h=()=>r(Pe,A(c,{onClosed:p,"onUpdate:show":v}),null);return M(n,s=>{c.message=s}),ue().render=h,{open:i,close:u,message:n}}});return e}function Ee(){if(!O.length||$e){const e=Fe();O.push(e)}return O[O.length-1]}function Me(e={}){if(!oe)return{};const o=Ee(),n=G(e);return o.open(x({},N,Ie.get(n.type||N.type),n)),o}const ze=e=>o=>Me(x({type:e},G(o))),He=ze("fail"),[_e,R]=$("cell-group"),Ae={title:String,inset:Boolean,border:E};var Ve=I({name:_e,inheritAttrs:!1,props:Ae,setup(e,{slots:o,attrs:n}){const i=()=>{var u;return r("div",A({class:[R({inset:e.inset}),{[X]:e.border&&!e.inset}]},n),[(u=o.default)==null?void 0:u.call(o)])},c=()=>r("div",{class:R("title",{inset:e.inset})},[o.title?o.title():e.title]);return()=>e.title||o.title?r(de,null,[c(),i()]):i()}});const Je=z(Ve);const H=fe(),Ke=e=>_.post("/users/register",e),Qe=e=>_.patch(`/users/${H.user.id}`,e),We=e=>_.put(`/users/${H.user.id}/password`,{password:e});export{qe as B,Je as C,Ge as F,He as a,Me as b,Qe as c,We as d,Oe as m,Ke as r,Pe as s,xe as u};
